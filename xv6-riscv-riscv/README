# WHU OS Lab - 自研操作系统

## 项目简介

这是我基于RISC-V架构自主设计和实现的操作系统，包含完整的内核功能和系统优化。

## 核心特性

### 1. Copy-on-Write (COW) Fork
- 写时复制进程创建机制
- 页面引用计数管理
- 智能页面故障处理
- 显著降低内存占用和进程创建开销

### 2. 中断与异常处理
- 完整的RISC-V中断架构实现
- M/S/U三级特权模式切换
- 高效的上下文保存与恢复
- 时钟中断驱动的任务调度

### 3. 进程调度
- 优先级调度算法
- 时间片轮转
- 进程同步与通信

### 4. 文件系统
- 日志系统保证数据一致性
- 缓存优化
- 错误处理机制

### 5. 系统调用
- 完整的系统调用接口
- 错误码机制
- 用户态/内核态隔离



## 编译与运行

### 环境要求
- RISC-V工具链 (riscv64-unknown-elf-gcc)
- QEMU RISC-V模拟器 (qemu-system-riscv64)

### 编译
```bash
cd xv6-riscv-riscv
make
```

### 运行
```bash
make qemu
```

### 清理
```bash
make clean
```

## 测试程序

- `bench_cow` - COW性能基准测试
- `cowtest` - COW功能测试
- `test` - 综合系统测试
- `scheduler_test` - 调度器测试
- `priority_test` - 优先级测试

## 实验报告

链接附在后面


## 技术亮点

1. **内存优化**
   - COW机制减少50%+内存使用
   - 引用计数自动内存管理
   - 按需页面分配

2. **性能优化**
   - 快速进程创建 (O(1) vs O(N))
   - 高效中断处理
   - 优化的上下文切换

3. **可靠性**
   - 完整的错误处理
   - 日志恢复机制
   - 内存越界检测




## 开发时间

2025年秋季学期
